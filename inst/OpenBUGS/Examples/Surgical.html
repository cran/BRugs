<!DOCTYPE html PUBLIC "-//W3C//DTD Html 1.0 Strict//EN" "http://www.w3.org/TR/Html1/DTD/strict.dtd"><html><head><title>Surgical</title></head><body><p><font face="Arial" color="#000100" size="2"></font><font face="Arial" color="#000100" size="3"><strong><img src="surgical0.bmp" alt="[surgical0]">&nbsp;&nbsp;&nbsp;</strong></font><font face="Courier New" color="#000100" size="6">Surgical: Institutional ranking</font><font face="Arial" color="#000100" size="2"><br><br></font><font face="Arial" color="#000100" size="3">This example considers mortality rates in 12 hospitals performing cardiac surgery in babies. The data are shown below.<br><center></font><font face="Arial" color="#000100" size="2"><br><img src="surgical1.bmp" alt="[surgical1]"><br></center></font><font face="Arial" color="#000100" size="3">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="3">The number of deaths r</font><font face="Arial" color="#000100" size="3"><sub>i</sub></font><font face="Arial" color="#000100" size="3"> for hospital </font><font face="Arial" color="#000100" size="3"><em>i</em></font><font face="Arial" color="#000100" size="3"> are modelled as a binary response variable with `true' failure probability p</font><font face="Arial" color="#000100" size="3"><sub>i</sub></font><font face="Arial" color="#000100" size="3">:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3"> ~ Binomial(p</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3">, n</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3">)<br><br>We first assume that the true failure probabilities are </font><font face="Arial" color="#000100" size="3"><em>independent</em></font><font face="Arial" color="#000100" size="3"> (</font><font face="Arial" color="#000100" size="3"><em>i.e</em></font><font face="Arial" color="#000100" size="3">.fixed effects) for each hospital. This is equivalent to assuming a standard non-informative prior distribution for the p</font><font face="Arial" color="#000100" size="3"><sub>i</sub></font><font face="Arial" color="#000100" size="3">'s, namely:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3"> ~ Beta(1.0, 1.0)<br><br><center><br><br></font><font face="Arial" color="#000100" size="3"><em>Graphical model for fixed effects surgical example:</em></font><font face="Arial" color="#000100" size="1"><br></font><font face="Arial" color="#000100" size="2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="2"><img src="surgical2.bmp" alt="[surgical2]"><br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="3">BUGS</font><font face="Arial" color="#000100" size="3"><em> language for fixed effects surgical model:</em></font><font face="Arial" color="#000100" size="3"><br><br></font><font face="Arial" color="#000100" size="2"></center></font><font face="Arial" color="#000100" size="3"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( i in 1 : N ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p[i] ~ dbeta(1.0, 1.0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r[i] ~ dbin(p[i], n[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br></font><font face="Arial" color="#0000FF" size="5"><br></font><font face="Arial" color="#000100" size="1"><br></font><font face="Arial" color="#0000FF" size="5"><a href="../Examples/Surgicaldata.html"></font><font face="Arial" color="#0000FF" size="5"><u>Data</u></font><font face="Arial" color="#0000FF" size="5"></a>&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="3">( click to open )</font><font face="Arial" color="#000100" size="1"><br><br></font><font face="Arial" color="#0000FF" size="5"><a href="../Examples/Surgicalinits.html"></font><font face="Arial" color="#0000FF" size="5"><u>Inits</u></font><font face="Arial" color="#0000FF" size="5"></a></font><font face="Arial" color="#000100" size="3"> ( click to open )</font><font face="Arial" color="#000100" size="1"><br></font><font face="Arial" color="#000100" size="2"><strong><br></strong></font><font face="Arial" color="#000100" size="3">A more realistic model for the surgical data is to assume that the failure rates across hospitals are </font><font face="Arial" color="#000100" size="3"><em>similar</em></font><font face="Arial" color="#000100" size="3"> in some way. This is equivalent to specifying a </font><font face="Arial" color="#000100" size="3"><em>random effects</em></font><font face="Arial" color="#000100" size="3"> model for the true failure probabilities p</font><font face="Arial" color="#000100" size="3"><sub>i</sub></font><font face="Arial" color="#000100" size="3"> as follows:<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logit(p</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3">) = b</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b</font><font face="Arial" color="#000100" size="2"><sub>i</sub></font><font face="Arial" color="#000100" size="3"><sub> </sub></font><font face="Arial" color="#000100" size="3">~ Normal(</font><font face="Symbol" color="#000100" size="3">m</font><font face="Arial" color="#000100" size="3">, </font><font face="Symbol" color="#000100" size="3">t</font><font face="Arial" color="#000100" size="3">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>Standard non-informative priors are then specified for the population mean (logit) probability of failure, </font><font face="Symbol" color="#000100" size="3">m</font><font face="Arial" color="#000100" size="3">, and precision, </font><font face="Symbol" color="#000100" size="3">t</font><font face="Arial" color="#000100" size="3">.<br></font><font face="Arial" color="#000100" size="2"><br><br><center></font><font face="Arial" color="#000100" size="3"><em>Graphical model for random effects surgical example:</em></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="3"><img src="surgical3.bmp" alt="[surgical3]"><br><br><br></font><font face="Arial" color="#000100" size="3">BUGS</font><font face="Arial" color="#000100" size="3"><em> language for random effects surgical model:<br></center></em></font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000100" size="3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for( i in 1 : N ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b[i] ~ dnorm(mu,tau)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r[i] ~ dbin(p[i],n[i])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logit(p[i]) &lt;- b[i]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop.mean &lt;- exp(mu) / (1 + exp(mu))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mu ~ dnorm(0.0,1.0E-6)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigma &lt;- 1 / sqrt(tau)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tau ~ dgamma(0.001,0.001)&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000100" size="2"><br><br></font><font face="Arial" color="#0000FF" size="5"><a href="../Examples/Surgicaldata.html"></font><font face="Arial" color="#0000FF" size="5"><u>Data</u></font><font face="Arial" color="#0000FF" size="5"></a>&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="3">( click to open )</font><font face="Arial" color="#000100" size="1"><br><br></font><font face="Arial" color="#0000FF" size="5"><a href="../Examples/Surgicalrandinits.html"></font><font face="Arial" color="#0000FF" size="5"><u>Inits</u></font><font face="Arial" color="#0000FF" size="5"></a></font><font face="Arial" color="#000100" size="3"> ( click to open )</font><font face="Arial" color="#000100" size="1"><br></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="2"><strong><br></strong></font><font face="Arial" color="#0000FF" size="5">Results</font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="3"><br>A burn in of 1000 updates followed by a further 10000 updates gave the following estimates of surgical mortality in each hospital for the fixed effect analysis<br><center></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#0000FF" size="5"><img src="surgical4.bmp" alt="[surgical4]"></center></font><font face="Arial" color="#000100" size="3"><br>and for the random effects analysis<br><center><br></font><font face="Arial" color="#000100" size="2"><img src="surgical5.bmp" alt="[surgical5]"><br></font><font face="Arial" color="#000000" size="2"><br></center></font><font face="Arial" color="#000100" size="3">A particular strength of the Markov chain Monte Carlo (Gibbs sampling) approach implemented in </font><font face="Arial" color="#000100" size="3"><em>BUGS</em></font><font face="Arial" color="#000100" size="3"> is the ability to make inferences on arbitrary functions of unknown model parameters. For example, we may compute the </font><font face="Arial" color="#000100" size="3"><em>rank</em></font><font face="Arial" color="#000100" size="3"> probabilty of failure for each hospital at each iteration. This yields a sample from the posterior distribution of the ranks. <br><br>The figures below show the posterior ranks for the estimated surgical mortality rate in each hospital for the random effect models. These are obtained by setting the rank monitor for variable p (select the &quot;Rank&quot; option from the &quot;Statistics&quot; menu) after the burn-in phase, and then selecting the &quot;histogram&quot; option from this menu after a further 10000 updates. These distributions illustrate the considerable uncertainty associated with 'league tables': there are only 2 hospitals (H and K) whose intervals exclude the median rank and none whose intervals fall completely within the lower or upper quartiles. <br><br><center></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="3"><em>Plots of distribution of ranks of true failure probability for random effects model:</em></font><font face="Arial" color="#000100" size="3"><br><br></font><font face="Arial" color="#000100" size="1"><br></font><font face="Arial" color="#000100" size="2"><br><img src="surgical6.bmp" alt="[surgical6]"><img src="surgical7.bmp" alt="[surgical7]"><br><img src="surgical8.bmp" alt="[surgical8]"><img src="surgical9.bmp" alt="[surgical9]"><br><img src="surgical10.bmp" alt="[surgical10]"><img src="surgical11.bmp" alt="[surgical11]"><br><img src="surgical12.bmp" alt="[surgical12]"><img src="surgical13.bmp" alt="[surgical13]"><br><img src="surgical14.bmp" alt="[surgical14]"><img src="surgical15.bmp" alt="[surgical15]"><br><img src="surgical16.bmp" alt="[surgical16]"><img src="surgical17.bmp" alt="[surgical17]"><br><br></center></font></p></body></html>