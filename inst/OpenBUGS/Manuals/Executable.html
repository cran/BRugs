<!DOCTYPE html PUBLIC "-//W3C//DTD Html 1.0 Strict//EN" "http://www.w3.org/TR/Html1/DTD/strict.dtd"><html><head><title>Executable</title></head><body><p><font face="Arial" color="#000100" size="1"><img src="executable0.bmp" alt="[executable0]"></font><font face="Arial" color="#0000FF" size="3"><a id="Linking"></font><font face="Arial" color="#000000" size="4"><strong>&nbsp;&nbsp;&nbsp;Executable versions</strong></font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">The OpenBUGS software family is unusual in consisting of a large number of unlinked modules. These modules are linked at run time as required by the module link loader StdLoader. This loader is packed together with a few other service modules and possibly a special module Init into a small .exe or .dll / so file. These .exe and .dll / so files know nothing about the OpenBUGS software and are quite generic. The StdLoader module caues the body of a module called Init to be executed. If the module Init is not linked into the .exe file or the .dll / so StdLoader will load and link it, looking for the modules code file first in subdirectory Code and then in subdirectory System/Code. Various implementations of Init are possible giving rise to software with different functionality. <br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">There are various ways of running the OpenBUGS software on computers with the Microsoft Windows operating system. winbugs.exe and bugs.exe are small Microsoft Windows program which loads code files (ocf) as needed. The bugs.exe program is run from the shortcut ClassicBUGS and has a similar interface to the old &quot;ClassicBUGS&quot; software. This shortcut sets the properties of the dos window used by the dos.exe program. A second shortcut BackBUGS runs winbugs with the file name specified on the command line, after the key word /SCRIPT, used as a source of commands in a BUGS script. This allows another program to call BUGS to do MCMC. The BackBUGS shortcut has been set up so that no window opens while BUGS runs. This can be changed by editing the shortcut so that &quot;/HEADLESS&quot; is removed from the command line.<br><br>brugs.dll is a small dynamic link library that can load ocf files as needed. The brugs dynamic link library was designed for use from within R and only loads ocf files that do not depend on Microsoft Windows. It is also possible to use the brugs dynamic link library from within a general C program. The pro</font><font face="Arial" color="#000100" size="3">cedures exported by the brugs library are specified in the module Bugs</font><font face="Arial" color="#000000" size="3">C. <br>In general the ocf files are not operating system dependent. In the make file those modules in black should be usable from both Windows and Linux, whereas the modules in red are only used in winbugs. We have produced a Linux ELF shared object file, bugs.so, equivalent of the bugs.exe file for running the BUGS software on the Linux platform. This bugs.so needs loading using dlopen from within a small C program. A second ELF shared object file brugs.so provides the R interface on Linux. <br><br>The R functions for interfacing to the brugs dynamic link library are in the BRugs package on CRAN. The names of these R functions are the same as in the OpenBUGS scripting language and have the same function. Both the scripting language and the R functions use metaprogramming to communicate with OpenBUGS, see the module BugsStdInterpreter for details.</font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3"><br>To make the executable versions of the OpenBUGS software a linker tool is used to pack several code (ocf) files into one exe or dynamic link library (shared object file on Linux). The linker is given a list of module names (in the form subsystem prefix followed by a file name). The linker searches for the ocf file in the code subdirectory of the subsystem with the appropiate file name. Note that this ocf might correspond to a module with a name different to the name given to the linker (for example the code file the linker finds for LinConsole --Lin/Code/Console.ocf-- corresponds to a module Console and not LinConsole)</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000100" size="3">ClassicBUGS uses the Console module for input and output. There are two version of the the module Console one for the Windows platform and the other for the Linux platform. On Windows the Console module makes calls to the Windows API while on Linux it makes calls to the C runtime library. There are several versions of the Init module. The winbugs.exe program links at runtime with the version of the Init module found in the Code subdirectory if it exists otherwise it links with the version in System/Code subdirectory. For winbugs.exe to function correctly it must link with the latter Init module, that is the file Code/Init.ocf must not exist (the System/Code/Init.ocf file sets up the Windows interface for WinBUGS and also for BlackBox). The bugs.exe and bugs.so files link a version of the Init module that sets up the command line interpreter. This source code of this versions of the Init module is in Bugs/Mod/Init.odc. The source code file Init.odc in the root directory contains an empty implementation of the Init module. This empty implementation is linked into the brugs.dll and brugs.so libraries to prevent them loading the Windows interface.<br><br>To create the winbugs.exe file click in the round .blob containing an ! mark with the mouse<br></font><font face="Arial" color="#000000" size="3"><img src="executable1.bmp" alt="[executable1]">DevCompiler.CompileThis BugsConsole BugsConfig <img src="executable2.bmp" alt="[executable2]"></font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000000" size="3"><img src="executable3.bmp" alt="[executable3]">DevLinker.Link</font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000000" size="3">winbugs.exe := Kernel$ + Files HostFiles StdLoader Console<br>1 Bugslogo.ico 2 Doclogo.ico 3 SFLogo.ico 4 CFLogo.ico 5 DtyLogo.ico<br>6 folderimg.ico 7 openimg.ico 8 leafimg.ico<br>1 Move.cur 2 Copy.cur 3 Link.cur 4 Pick.cur 5 Stop.cur 6 Hand.cur 7 Table.cur <img src="executable4.bmp" alt="[executable4]"><br></font><font face="Arial" color="#000100" size="3"><br>To create the classic version bugs.exe file c</font><font face="Arial" color="#000000" size="3">lick on the round </font><font face="Arial" color="#000100" size="3">blobs below containing an ! mark.<br></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000000" size="3"><img src="executable5.bmp" alt="[executable5]">DevCompiler.CompileThis BugsConsole BugsInit <img src="executable6.bmp" alt="[executable6]"></font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000000" size="3"><img src="executable7.bmp" alt="[executable7]">DevLinker.Link<br>dos bugs.exe := Kernel$+ Files HostFiles StdLoader Console Init 1 Bugslogo.ico <img src="executable8.bmp" alt="[executable8]"><br></font><font face="Arial" color="#FF0000" size="3">Finally delete the Init code file created: Code/Init.ocf. <br></font><font face="Arial" color="#FF0000" size="3"><strong>THIS IS VERY IMPORTANT BLACKBOX / WINBUGS WILL NOT START UP IF THIS FILE EXISTS!!!<br></strong></font><font face="Arial" color="#000100" size="3"><br>To create the brugs.dll file click in the round blob below containing a ! mark with the mouse. <br></font><font face="Arial" color="#000000" size="3"><img src="executable9.bmp" alt="[executable9]">DevCompiler.CompileThis BugsConsole <img src="executable10.bmp" alt="[executable10]"><br>next open the file Init.odc in the root directory and compile it (Ctl key + k key) and then click in the round blob below </font><font face="Arial" color="#000100" size="3">containing a ! mark with the mouse. </font><font face="Arial" color="#FF0000" size="3"><strong><br></strong></font><font face="Arial" color="#000000" size="3"><img src="executable11.bmp" alt="[executable11]">DevLinker.LinkDynDll </font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">brugs.dll := Kernel$+ Meta Files HostFiles StdLoader Init Console BugsInterpreter BugsC# <img src="executable12.bmp" alt="[executable12]"></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#FF0000" size="3">Finally delete the Init code file created: Code/Init.ocf. <br></font><font face="Arial" color="#FF0000" size="3"><strong>THIS IS VERY IMPORTANT BLACKBOX / WINBUGS WILL NOT START UP IF THIS FILE EXISTS!!!<br><br>(* <br>&nbsp;&nbsp;&nbsp;Please note I am the only person who has the ELF linker at present.<br>*)&nbsp;&nbsp;&nbsp;</strong></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000100" size="3">To create the classic version of bugs as a so file c</font><font face="Arial" color="#000000" size="3">lick on the round </font><font face="Arial" color="#000100" size="3">blobs below containing an ! mark.<br></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000000" size="3"><img src="executable13.bmp" alt="[executable13]">DevCompiler.CompileThis LinLibc LinConsole BugsInit <img src="executable14.bmp" alt="[executable14]"></font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000000" size="3"><img src="executable15.bmp" alt="[executable15]">DevElfLinker.LinkDynDll <br>bugs.so := LinKernel$+ Files LinHostFiles StdLoader Console Init <img src="executable16.bmp" alt="[executable16]"><br><br></font><font face="Arial" color="#FF0000" size="3">Finally delete the Init code file created: Code/Init.ocf. <br></font><font face="Arial" color="#FF0000" size="3"><strong>THIS IS VERY IMPORTANT BLACKBOX / WINBUGS WILL NOT START UP IF THIS FILE EXISTS!!!<br><br></strong></font><font face="Arial" color="#000100" size="3">The small C program to load the bugs.so on Linux is here </font><font face="Arial" color="#0000FF" size="3"><a href="../CBugs.html"></font><font face="Arial" color="#0000FF" size="3"><u>CBugs</u></font><font face="Arial" color="#0000FF" size="3"></a></font><font face="Arial" color="#000100" size="3"> <br><br>To create an ELF version of brugs.so for Intel Linux click in the round blobs containg an ! mark with the mouse. <br></font><font face="Arial" color="#FF0000" size="3"><strong><br></strong></font><font face="Arial" color="#000000" size="3"><img src="executable17.bmp" alt="[executable17]">DevCompiler.CompileThis LinLibc LinConsole<img src="executable18.bmp" alt="[executable18]"><br>next open the file Init.odc in the root directory and compile it (Ctl key + k key) and then click in the round blob below </font><font face="Arial" color="#000100" size="3">containing a ! mark with the mouse. <br></font><font face="Arial" color="#000000" size="3"><img src="executable19.bmp" alt="[executable19]">DevElfLinker.LinkDynDll </font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">brugs.so := LinKernel$+ Files LinHostFiles StdLoader Meta Init Console BugsInterpreter</font><font face="Arial" color="#000100" size="2"> </font><font face="Arial" color="#000000" size="3">BugsC#</font><font face="Arial" color="#0000FF" size="3"> </font><font face="Arial" color="#000000" size="3"><img src="executable20.bmp" alt="[executable20]"></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#FF0000" size="3">Finally delete the Init code file created: Code/Init.ocf. <br></font><font face="Arial" color="#FF0000" size="3"><strong>THIS IS VERY IMPORTANT BLACKBOX / WINBUGS WILL NOT START UP IF THIS FILE EXISTS!!!<br></strong></font><font face="Arial" color="#0000FF" size="3"><br></font></p></body></html>