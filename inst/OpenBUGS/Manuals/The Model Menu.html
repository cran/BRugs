<!DOCTYPE html PUBLIC "-//W3C//DTD Html 1.0 Strict//EN" "http://www.w3.org/TR/Html1/DTD/strict.dtd"><html><head><title>The Model Menu</title></head><body><p><font face="Arial" color="#000100" size="2"><img src="the model menu0.bmp" alt="[the model menu0]"></font><font face="Arial" color="#000100" size="6"><strong>&nbsp;&nbsp;&nbsp;The Model Menu</strong></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#0000FF" size="2"><br></font><font face="Arial" color="#000100" size="2"><a id="Contents"></font><font face="Arial" color="#000100" size="5"><strong>Contents</strong></font><font face="Arial" color="#000100" size="2"></a><br></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#GeneralProperties"></font><font face="Arial" color="#0000FF" size="4"><u>General&nbsp;properties</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#Specification"></font><font face="Arial" color="#0000FF" size="4"><u>Specification...</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#Update"></font><font face="Arial" color="#0000FF" size="4"><u>Update...</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#MonitorMetropolis"></font><font face="Arial" color="#0000FF" size="4"><u>Monitor&nbsp;Metropolis</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#SaveState"></font><font face="Arial" color="#0000FF" size="4"><u>Save&nbsp;State</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#Seed"></font><font face="Arial" color="#0000FF" size="4"><u>Seed...</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="1">&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#0000FF" size="4"><a href="#Script"></font><font face="Arial" color="#0000FF" size="4"><u>Script</u></font><font face="Arial" color="#0000FF" size="4"></a></font><font face="Arial" color="#000100" size="4"><br></font><font face="Arial" color="#000100" size="2"><br><a id="GeneralProperties"></font><font face="Arial" color="#000100" size="5"><strong>General properties</strong></font><font face="Arial" color="#000100" size="2"></a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a>]</font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="3">The commands in this menu either apply to the whole statistical model or open dialog boxes. This menu is only on display if the focus view is a text window or a Doodle.<br></font><font face="Arial" color="#000100" size="2"><br><a id="Specification"></font><font face="Arial" color="#000100" size="5"><strong>Specification...</strong></font><font face="Arial" color="#000100" size="2"></a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a>]<br></font><font face="Arial" color="#000100" size="2"><br><br><br><br></font><font face="Arial" color="#000100" size="3"><br>This non-modal dialog box acts on the focus view.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>check model</em></strong></font><font face="Arial" color="#000100" size="3">: If the focus view contains text,</font><font face="Arial" color="#000100" size="3"><em> WinBUGS</em></font><font face="Arial" color="#000100" size="3"> assumes the model is specified in the</font><font face="Arial" color="#000100" size="3"><em> BUG</em></font><font face="Arial" color="#000100" size="3">S language. The</font><font face="Arial" color="#000100" size="3"><em> check model</em></font><font face="Arial" color="#000100" size="3"> button parses the</font><font face="Arial" color="#000100" size="3"><em> BUG</em></font><font face="Arial" color="#000100" size="3">S language description of the statistical model, as in the classic version of</font><font face="Arial" color="#000100" size="3"><em> BUG</em></font><font face="Arial" color="#000100" size="3">S. If a syntax error is detected the cursor is placed where the error was found and a description of the error is</font><font face="Arial" color="#000000" size="3"> given on the status line (lower left corner of screen). If a </font><font face="Arial" color="#000100" size="3">stretch of text is highlighted the parsing starts from the first character highlighted </font><font face="Arial" color="#000100" size="3"><em>(i.e</em></font><font face="Arial" color="#000100" size="3">. highlight the word model) else parsing starts at the top of the window.<br><br>If the focus view contains a Doodle</font><font face="Arial" color="#000100" size="3"><em> (i.e.</em></font><font face="Arial" color="#000100" size="3"> the Doodle has been selected and is surrounded by a hairy border</font><font face="Arial" color="#000100" size="3"><em>), WinBUG</em></font><font face="Arial" color="#000100" size="3">S assumes the model has been specified graphically. If a syntax error is detected the node where the error was found is highlighted and a description of the error is given on the status line.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>load data:</em></strong></font><font face="Arial" color="#000100" size="3"> The</font><font face="Arial" color="#000100" size="3"><em> load dat</em></font><font face="Arial" color="#000100" size="3">a button acts on the focus view; it will be greyed out unless the focus view contains text.<br><br>Data can be identified in two ways:<br><br>1) if the data is in a separate document, the window containing that document needs to be in the focus view (the windows title bar will be coloured not grey) when the</font><font face="Arial" color="#000100" size="3"><em> load dat</em></font><font face="Arial" color="#000100" size="3">a command is used;<br>2) if the data is specified as part of a document, the first character of the data (either list if in S-Plus format, or the first array name if in rectangular format) must be highlighted and the data will be read from there on.<br> </font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#0000FF" size="3"><u><a href="../Manuals/Model Specification.html#FormattingOfData">See&nbsp;here&nbsp;for&nbsp;details&nbsp;of&nbsp;data&nbsp;format</u></font><font face="Arial" color="#0000FF" size="3">s</font><font face="Arial" color="#FF0000" size="3"></a></font><font face="Arial" color="#000100" size="3"><br><br>Any syntax errors or data inconsistencies are displayed in the status line. Corrections can be made to the data without returning to th</font><font face="Arial" color="#000100" size="3"><em>e check mode</em></font><font face="Arial" color="#000100" size="3">l stage. When the data have been loaded successfully, 'Data Loaded' should appear in the status line.<br><br>The</font><font face="Arial" color="#000100" size="3"><em> load dat</em></font><font face="Arial" color="#000100" size="3">a button becomes active once a model has been successfully checked, and ceases to be active once the model has been successfully compiled.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>num of chains:</em></strong></font><font face="Arial" color="#000100" size="3"> The number of chains to be simulated can be entered into the text entry field next to the caption</font><font face="Arial" color="#000100" size="3"><em> num of chains</em></font><font face="Arial" color="#000100" size="3">. This field can be typed in after the model has been checked and before the model has been compiled. By default, one chain is simulated.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>compile:</em></strong></font><font face="Arial" color="#000100" size="3"> The</font><font face="Arial" color="#000100" size="3"><em> compil</em></font><font face="Arial" color="#000100" size="3">e button builds the data structures needed to carry out MCMC sampling. The model is checked for completeness and consistency with the data.<br><br>A node called 'deviance' is automatically created which calculates minus twice the log-likelihood at each iteration, up to a constant. This node can be used like any other node in the graphical model.<br><br>This command becomes active once the model has been successfully checked, and when the model has been successfully compiled, 'model compiled' should appear in the status line.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>load inits:</em></strong></font><font face="Arial" color="#000100" size="3"> The</font><font face="Arial" color="#000100" size="3"><em> load init</em></font><font face="Arial" color="#000100" size="3">s button acts on the focus view: it will be greyed out unless the focus view contains text. The initial values will be loaded for the chain indicated in the text entry field to the right of the caption</font><font face="Arial" color="#000100" size="3"><em> for chai</em></font><font face="Arial" color="#000100" size="3">n. The value of this text field can be edited to load initial values for any of the chains.<br><br>Initial values are specified in exactly the same way as data files. If some of the elements in an array are known (say because they are constraints in a parameterisation), those elements should be specified as missing (NA) in the initial values file.<br><br>This command becomes active once the model has been successfully compiled, and checks that initial values are in the form of an S-Plus object or rectangular array and that they are consistent with any previously loaded data. Any syntax errors or inconsistencies in the initial value are displayed.<br><br>If, after loading the initial values, the model is fully initialized this will be reported by displaying the message</font><font face="Arial" color="#000100" size="3"><em> initial values loaded: model initialize</em></font><font face="Arial" color="#000100" size="3">d. Otherwise the status line will show the message</font><font face="Arial" color="#000100" size="3"><em> initial values loaded: model contains uninitialized node</em></font><font face="Arial" color="#000100" size="3">s. The second message can have several meanings:<br><br>a) If only one chain is simulated it means that the chain contains some nodes that have not been initialized yet.<br>b) If several chains are to be simulated it could mean that no initial values have been loaded for one of the chains.<br><br>In either case further initial values can be loaded, or the</font><font face="Arial" color="#000100" size="3"><em> gen init</em></font><font face="Arial" color="#000100" size="3">s button can be pressed to try and generate initial values for</font><font face="Arial" color="#000100" size="3"><em> al</em></font><font face="Arial" color="#000100" size="3">l the uninitialized nodes in</font><font face="Arial" color="#000100" size="3"><em> al</em></font><font face="Arial" color="#000100" size="3">l the simulated chains.<br><br>Generally it is recommended to load initial values for all fixed effect nodes (founder nodes with no parents) for all chains, initial values for random effects can be generated using the</font><font face="Arial" color="#000100" size="3"><em> gen init</em></font><font face="Arial" color="#000100" size="3">s button.<br><br>This</font><font face="Arial" color="#000100" size="3"><em> load init</em></font><font face="Arial" color="#000100" size="3">s button can still be executed once Gibbs sampling has been started. It will have the effect of starting the sampler out on a new trajectory. A modal warning message will appear if the command is used in this context.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font face="Arial" color="#000100" size="3"><strong><em><br>gen inits:</em></strong></font><font face="Arial" color="#000100" size="3"> The</font><font face="Arial" color="#000100" size="3"><em> gen init</em></font><font face="Arial" color="#000100" size="3">s button attempts to generate initial values by sampling either from the prior or from an approximation to the prior. In the case of discrete variables a check is made that a configuration of zero probability is not generated. This command will generate extreme values if any of the priors are very vague. If the command is successful the message 'initial values generated: model initialized' is displayed otherwise the message</font><font face="Arial" color="#000000" size="3"> 'could not generate initial values' is displayed</font><font face="Arial" color="#000100" size="3">.<br><br>The</font><font face="Arial" color="#000100" size="3"><em> gen init</em></font><font face="Arial" color="#000100" size="3">s button becomes active once the model has been successfully compiled, and will cease to be active once the model has been initialized.<br><br></font><font face="Arial" color="#000100" size="3"><strong><a id="Update">Update..</strong></font><font face="Arial" color="#000100" size="3">.</a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a></font><font face="Arial" color="#000100" size="3">]<br><br><br><br>This menu will become active once the model has been compiled and initialized, and has fields:</font><font face="Arial" color="#000100" size="3"><em><br></em></font><font face="Arial" color="#000100" size="3"><strong><em><br>updates</em></strong></font><font face="Arial" color="#000100" size="3">:</font><font face="Arial" color="#000100" size="3"><em> update</em></font><font face="Arial" color="#000100" size="3">s *</font><font face="Arial" color="#000100" size="3"><em> thi</em></font><font face="Arial" color="#000100" size="3">n MCMC updates will be carried out.</font><font face="Arial" color="#000100" size="3"><em><br></em></font><font face="Arial" color="#000100" size="3"><strong><em><br>refresh</em></strong></font><font face="Arial" color="#000100" size="3">: the number of updates divided by</font><font face="Arial" color="#000100" size="3"><em> thi</em></font><font face="Arial" color="#000100" size="3">n between redrawing the screen.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>thin</em></strong></font><font face="Arial" color="#000100" size="3">: the samples from every</font><font face="Arial" color="#000100" size="3"><em> </em></font><font face="Arial" color="#000100" size="3"><sup>kt</sup></font><font face="Arial" color="#000100" size="3">h iteration will be used for inference, where</font><font face="Arial" color="#000100" size="3"><em> </em></font><font face="Arial" color="#000100" size="3">k is the value of</font><font face="Arial" color="#000100" size="3"><em> thi</em></font><font face="Arial" color="#000100" size="3">n. Setting</font><font face="Arial" color="#000100" size="3"><em> k</em></font><font face="Arial" color="#000100" size="3"> &gt; 1 can help to reduce the autocorrelation in the sample, but there is no real advantage in thinning except to reduce storage requirements.</font><font face="Arial" color="#000100" size="3"><em><br></em></font><font face="Arial" color="#000000" size="3"><strong><em><br>update</em></strong></font><font face="Arial" color="#000000" size="3">: Click to start updating the model. Clicking on</font><font face="Arial" color="#000000" size="3"><em> updat</em></font><font face="Arial" color="#000000" size="3">e during sampling will pause the simulation after the current block of iterations, as defined by</font><font face="Arial" color="#000000" size="3"><em> refres</em></font><font face="Arial" color="#000000" size="3">h, has been completed; the number of updates required can then be changed if needed. Clicking on update again will restart the simulation. This button becomes active when the model has been successfully compiled and given initial values.<br></font><font face="Arial" color="#000000" size="3"><strong><em><br>iteration</em></strong></font><font face="Arial" color="#000000" size="3">: the total number of iterations carried out divided by thin.</font><font face="Arial" color="#FF0000" size="3"><br></font><font face="Arial" color="#000100" size="3"><strong><em><br>over relax</em></strong></font><font face="Arial" color="#000100" size="3">: click on this box (a tick will then appear) to select an over-relaxed form of MCMC (Neal, 1998)<br>which will be executed where possible. This generates multiple samples at each iteration and then selects one that is negatively correlated with the current value. The time per iteration will be increased, but the within-chain correlations should be reduced and hence fewer iterations may be necessary. However, this method is not always effective and should be used with caution. The auto-correlation function may be used to check whether the mixing of the chain is improved.<br></font><font face="Arial" color="#000100" size="3"><strong><em><br>adapting</em></strong></font><font face="Arial" color="#000100" size="3">: This box will be ticked while the Metropolis or slice-sampling MCMC algorithm is in its initial tuning phase where some optimization parameters are tuned. All statistics for the model will ignore</font><font face="Arial" color="#000000" size="3"> information from this adapting phase. The Metropolis and slice-sampling algorithms have adaptive phases of 4000 and 500 iterations respectively which will be discarded from all statistics. For details of how to change these default settings please see</font><font face="Arial" color="#0000FF" size="3"> </font><font face="Arial" color="#0000FF" size="3"><u><a href="../Manuals/The Options Menu.html#UpdateOptions">Update&nbsp;options..</u></font><font face="Arial" color="#0000FF" size="3">.</font><font face="Arial" color="#000000" size="3"></a></font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="5"><strong><a id="MonitorMetropolis">Monitor Metropoli</strong></font><font face="Arial" color="#000100" size="2">s</a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a></font><font face="Arial" color="#000100" size="2">]</font><font face="Arial" color="#000000" size="3"><br>This command is only active if the Metropolis algorithm is being used for the model. This shows the minimum, maximum and average acceptance rate averaged over 100 iterations as the Metropolis algorithm adapts over the first N iterations. The rate should lie between the two horizontal lines. The first N iterations of the simulation cannot be used for statistical inference. The default value of N is 4000 (see</font><font face="Arial" color="#0000FF" size="3"> </font><font face="Arial" color="#0000FF" size="3"><u><a href="../Manuals/The Options Menu.html#UpdateOptions">Update&nbsp;options..</u></font><font face="Arial" color="#0000FF" size="3">.</font><font face="Arial" color="#000000" size="3"></a> for details of how to change this value).</font><font face="Arial" color="#000000" size="2"><br></font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000100" size="5"><strong><a id="SaveState">Save Stat</strong></font><font face="Arial" color="#000100" size="2">e</a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a></font><font face="Arial" color="#000100" size="2">]</font><font face="Arial" color="#000100" size="3"><br>Opens a window showing the current state of all the stochastic variables in the model, displayed in S-Plus format. This could then be used as an initial value file for future runs.</font><font face="Arial" color="#000100" size="2"><br><br></font><font face="Arial" color="#000100" size="5"><strong><a id="Seed">Seed..</strong></font><font face="Arial" color="#000100" size="2">.</a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a></font><font face="Arial" color="#000100" size="2">]<br><br></font><font face="Arial" color="#000100" size="2"></font><font face="Arial" color="#000100" size="2"><br><br></font><font face="Arial" color="#000100" size="3">Opens a non-modal dialog box containing:<br><br></font><font face="Arial" color="#000100" size="3"><strong><em>seed:</em></strong></font><font face="Arial" color="#000100" size="3"> a text entry field where the new seed of the random number generator can be typed.<br></font><font face="Arial" color="#000100" size="3"><em><br></em></font><font face="Arial" color="#000000" size="3"><strong><em>coverage:</em></strong></font><font face="Arial" color="#000000" size="3"> the pseudo-random number generator used by </font><font face="Arial" color="#000000" size="3"><em>WinBUGS</em></font><font face="Arial" color="#000000" size="3"> generates a finite (albeit very long) sequence of distinct numbers, which would eventually be repeated if the sampler were run for a sufficiently long time. The </font><font face="Arial" color="#000000" size="3"><em>coverage</em></font><font face="Arial" color="#000000" size="3"> field shows the percentage of this sequence covered during the current </font><font face="Arial" color="#000000" size="3"><em>WinBUGS</em></font><font face="Arial" color="#000000" size="3"> session.<br><br></font><font face="Arial" color="#000000" size="3"><strong><em>set:</em></strong></font><font face="Arial" color="#000000" size="3"> sets the seed to the value entered into the dialog box. The seed must be set </font><font face="Arial" color="#000000" size="3"><em>after</em></font><font face="Arial" color="#000000" size="3"> the model is checked (via 'check model' - see </font><font face="Arial" color="#0000FF" size="3"><a href="#Specification"></font><font face="Arial" color="#0000FF" size="3"><u>Specification...</u></font><font face="Arial" color="#0000FF" size="3"></a></font><font face="Arial" color="#000000" size="3">) in order for the new value to apply to the current analysis.</font><font face="Arial" color="#FF00FF" size="3"><br></font><font face="Arial" color="#FF00FF" size="2"><br></font><font face="Arial" color="#000100" size="2"><a id="Script"></font><font face="Arial" color="#000100" size="5"><strong>Script</strong></font><font face="Arial" color="#000100" size="2"></a> </font><font face="Arial" color="#0000FF" size="3">[<a href="#Contents">top</a>]</font><font face="Arial" color="#000100" size="2"><br></font><font face="Arial" color="#000000" size="3">The Script command is used to run &quot;model scripts&quot; in batch-mode: if the focus-view contains a series of </font><font face="Arial" color="#000000" size="3"><em>WinBUGS</em></font><font face="Arial" color="#000000" size="3"> batch-mode commands then selecting this command from the </font><font face="Arial" color="#000000" size="3"><em>Model</em></font><font face="Arial" color="#000000" size="3"> menu will cause the script to be executed. Please see </font><font face="Arial" color="#0000FF" size="3"><a href="../Manuals/Scripts.html"></font><font face="Arial" color="#0000FF" size="3"><u>Batch-mode:&nbsp;Scripts</u></font><font face="Arial" color="#0000FF" size="3"></a></font><font face="Arial" color="#000000" size="3"> for full details.<br></font><font face="Arial" color="#000000" size="2"><br></font></p></body></html>