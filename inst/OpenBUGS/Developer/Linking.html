<!DOCTYPE html PUBLIC "-//W3C//DTD Html 1.0 Strict//EN" "http://www.w3.org/TR/Html1/DTD/strict.dtd"><html><head><title>Linking</title></head><body><p><font face="Arial" color="#000100" size="1"><img src="linking0.bmp" alt="[linking0]"></font><font face="Arial" color="#0000FF" size="3"><a id="Linking"></font><font face="Arial" color="#000000" size="4"><strong>&nbsp;&nbsp;&nbsp;</strong></font><font face="Courier New" color="#000100" size="6">Linking and Executable<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;versions</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">The OpenBUGS software family is unusual in consisting of a large number of unlinked modules in a binary format .These modules can not be directly accessed by the operating system. A linker tool is used to link a number of binary modules into either an exectutable or a library. The BlackBox developement tools contain a special module the StdLoader which is able to load and link new modules into a running OpenBUGS application. There are two approaches to packageing the OpenBUGS software. In the first only a small number of modules are linked along with StdLoader in the second all the modules in the OpenBUGS software are linked into one large file. The first approach is more dynamic and flexible and is used in WinBUGS. However it has some disadvantages: it involves a large number of files in a particular directory structure which can become fragile when used with a library for interfacing to other software. For this reason we prefer to fully link the library versions of OpenBUGS.<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">There are various ways of running the OpenBUGS software on computers with the Microsoft Windows operating system. winbugs.exe is small Microsoft Windows program which loads code files (ocf) as needed. The classicbugs.exe program has a similar interface to the old &quot;ClassicBUGS&quot; software. A shortcut BackBUGS runs Winbugs with the file name specified on the command line, after the key word /PAR, used as a source of commands in a BUGS script. This allows another program to call OpenBUGS to do MCMC simulation. The BackBUGS shortcut has been set up so that no window opens while BUGS runs. This can be changed by editing the shortcut so that &quot;/HEADLESS&quot; is removed from the command line.<br><br>The brugs dynamic link library was designed for use from within Splus/R statistical programming enviroment and only uses modues that do not depend on Microsoft Windows. The pro</font><font face="Arial" color="#000100" size="3">cedures exported by the brugs library are specified in the module BugsBRugs</font><font face="Arial" color="#000000" size="3">. In particular the CLI procedure sets up a simple command line interpreter -- the ClassicBUGS interface. It is also possible to use the brugs dynamic link library from within a general C program (see </font><font face="Courier New" color="#0000FF" size="3"><a href="../Developer/BRugsH.html">BRugs&nbsp;header&nbsp;file</a></font><font face="Arial" color="#000000" size="3"> for details). <br><br>In general the ocf files are not operating system dependent. In the make file those modules in black should be usable from both Windows and Linux, whereas the modules in red are only used in winbugs. With just a few changes the modules that are linked to form the brugs dynamic link library can also be linked to produce a shared object file for linux. <br><br>The R functions for interfacing to the brugs dynamic link library / shared object file are in the BRugs package on CRAN. The names of these R functions are the same as in the OpenBUGS scripting language and have the same function. Both the scripting language and the R functions use metaprogramming to communicate with OpenBUGS, see the module BugsStdInterpreter for details.</font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3"><br>To make the executable versions of the OpenBUGS software a linker tool is used to pack several code (ocf) files into one exe or dynamic link library (shared object file on Linux). The linker is given a list of module names (in the form subsystem prefix followed by a file name). The linker searches for the ocf file in the code subdirectory of the subsystem with the appropiate file name. Note that this ocf might correspond to a module with a name different to the name given to the linker. Winows and Linux use different binary formats for executables and libraries. Therefore two linker tools are requires: DevLinker for Windows and DevElfLinker for Linux.</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000100" size="3">ClassicBUGS uses the Console module for input and output. There are two version of the the module Console one for the Windows platform and the other for the Linux platform. On Windows the Console module makes calls to the Windows API while on Linux it makes calls to the C runtime library. <br><br><br></font><font face="Arial" color="#000100" size="5"><strong>How to link OpenBUGS</strong></font><font face="Arial" color="#000100" size="3"><br><br>To create the winbugs.exe file click in the round .blob containing an ! mark with the mouse<br><br></font><font face="Arial" color="#000000" size="3"><img src="linking1.bmp" alt="[linking1]">DevLinker.Link</font><font face="Arial" color="#000100" size="3"><br></font><font face="Arial" color="#000000" size="3">winbugs.exe := Kernel$ + Files HostFiles Console WinConsole StdLoader <br>1 Bugslogo.ico 2 Doclogo.ico 3 SFLogo.ico 4 CFLogo.ico 5 DtyLogo.ico<br>6 folderimg.ico 7 openimg.ico 8 leafimg.ico<br>1 Move.cur 2 Copy.cur 3 Link.cur 4 Pick.cur 5 Stop.cur 6 Hand.cur 7 Table.cur <img src="linking2.bmp" alt="[linking2]"><br></font><font face="Arial" color="#FF0000" size="3"><strong><br></strong></font><font face="Arial" color="#000000" size="3">To make a fully linked version of the brugs dynamic link library for Windows click in the round blob below<br><img src="linking3.bmp" alt="[linking3]">DevLinker.LinkDll<br>brugs.dll := Kernel$+ Files HostFiles Meta Console WinConsole BugsInterpreter<br><br>Math Strings Dialog Stores<br><br>BugsMappers BugsStrings BugsFiles BugsStdInterpreter<br>BugsMsg BugsRegistry<br><br>MathSort MathMatrix MathSparsematrix MathFunc MathRandnum MathODE MathFunctional MathRungeKutta MathRungeKutta45 MathBulirschStoer MathAESolver MathIntegrate<br></font><font face="Arial" color="#000100" size="3">MathLincon</font><font face="Arial" color="#000100" size="2"> </font><font face="Arial" color="#000000" size="3">MathTT800 </font><font face="Arial" color="#FF0000" size="3">MathTaucsImp </font><font face="Arial" color="#000000" size="3">MathDiagmatrix MathBGR MathSmooth<br><br>GraphRules GraphNodes GraphLogical GraphStochastic GraphScalar GraphVector GraphUnivariate GraphMultivariate GraphConjugateMV GraphChain GraphBlock<br><br>MonitorsSamples MonitorsSummary MonitorsDeviance<br><br>UpdaterUpdaters UpdaterResample UpdaterMethods UpdaterUnivariate UpdaterMultivariate UpdaterContinuous UpdaterActions UpdaterMetmonitor <br></font><font face="Arial" color="#FF0000" size="3"><br></font><font face="Arial" color="#000000" size="3">GraphConstant GraphMixture GraphStack GraphFlat GraphGeneric GraphClock<br><br>LindevCPM LindevCPT LindevCPB LindevCPS LindevCPP LindevCPE LindevCPH LindevCPL486 LindevCPC486 LindevCPV486<br><br>BugsVersion BugsGrammar BugsNames BugsIndex BugsVariables BugsParser BugsEvaluate BugsNodes</font><font face="Arial" color="#8000FF" size="3"> </font><font face="Arial" color="#000000" size="3">BugsOptimize BugsChaingraph</font><font face="Arial" color="#0000FF" size="3"> </font><font face="Arial" color="#000000" size="3">BugsCodegen BugsCPCompiler BugsData BugsDeviance BugsRobjects BugsInterface BugsInfo<br><br>Services<br><br>BugsScripting<br><br>BugsEmbed<br><br>BugsRectData BugsSplusData</font><font face="Arial" color="#FF0000" size="3"><br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">SamplesMonitors SamplesIndex SamplesInterface SamplesFormatted SamplesEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">SummaryMonitors SummaryIndex SummaryInterface SummaryFormatted SummaryEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">RanksMonitors RanksIndex RanksInterface RanksFormatted RanksEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">DevianceMonitors DevianceIndex DeviancePlugin DevianceInterface DevianceFormatted DevianceEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">CorrelInterface</font><font face="Arial" color="#FF0000" size="3"> </font><font face="Arial" color="#000000" size="3">CorrelFormatted CorrelEmbed<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">GraphCloglog GraphCut GraphDensity GraphEigenvals GraphGammap GraphInprod GraphInverse GraphKepler GraphLog GraphLogdet GraphLogit GraphProbit GraphProduct GraphRanks GraphSumation GraphTable GraphFunctional GraphODEmath GraphODElang<br>GraphPValue GraphReplicate GraphItermap<br><br>GraphBern GraphBinomial GraphCat GraphFounder GraphGeometric GraphHypergeometric GraphMendelian GraphNegbin GraphPoisson GraphRecessive<br><br>GraphMultinom <br><br>GraphBeta GraphChisqr GraphDbexp GraphExp GraphF GraphGEV GraphGPD GraphGamma GraphGengamma GraphLogistic GraphLognorm GraphNormal GraphPareto GraphPolygene GraphStable GraphT GraphTrapezium GraphUniform GraphWeibull GraphWeibullShifted <br><br>GraphDirichlet GraphMVNormal GraphMVT GraphRENormal GraphStochtrend <br>GraphWishart<br><br>GraphScalarT GraphVectorT GraphUnivariateT GraphScalartemp1 GraphVectortemp1<br>GraphUnivariatetemp1<br><br>UpdaterHybrid1D UpdaterAM UpdaterDE UpdaterHybrid<br><br>UpdaterForward <br><br>UpdaterBeta UpdaterCatagorical UpdaterDFreeARS UpdaterDescreteSlice UpdaterEmpty<br>UpdaterGriddy UpdaterGamma UpdaterMetover UpdaterDFreeHybrid1D UpdaterMetbinomial UpdaterMetnormal UpdaterNormal UpdaterPareto UpdaterPoisson UpdaterRejection UpdaterSCAM UpdaterSCDE UpdaterSlice UpdaterNaivemet<br><br>UpdaterAMblock UpdaterAMNLLS UpdaterChain UpdaterDEBlock UpdaterDirichlet <br>UpdaterDirichletprior UpdaterDFreeHybrid UpdaterGLM UpdaterGMRF UpdaterHybridnormal UpdaterHybridglm UpdaterMultinomial UpdaterMVNormal UpdaterMVNLinear UpdaterWishart<br><br>UpdaterUnivariateT UpdaterMultivariateT<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">SpatialBound SpatialPWDPrior SpatialCARl1 SpatialCARNormal SpatialCARProper SpatialStrucMVN SpatialDiscKrig SpatialExpKrig SpatialMaternKrig SpatialPoissconv UpdaterKrigparam<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">BugsExternal BugsMessages BugsScripts CorrelMessages DevianceMessages<br>GraphMessages RanksMessages SamplesMessages SpatialExternal SummaryMessages <br>UpdaterMessages UpdaterExternal MapsMessages<br><br>BugsResources CorrelResources DevianceResources GraphResources RanksResources <br>SamplesResources SpatialResources SummaryResources UpdaterResources MapsResources<br><br>Startup BugsCLI <br><br>BugsC# <img src="linking4.bmp" alt="[linking4]"></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#FF0000" size="3"><strong><br></strong></font><font face="Arial" color="#000000" size="3">To use brugs.dll to make classicbugs.exe the version of ClassicBUGS for Windows click in the round blob<br><img src="linking5.bmp" alt="[linking5]">DevLinker.Link dos classicbugs.exe := BugsClassic$ 1 Bugslogo.ico <img src="linking6.bmp" alt="[linking6]"><br><br>To create a fully linked brugs.so click in the round blob<br><img src="linking7.bmp" alt="[linking7]">DevElfLinker.LinkDll<br>brugs.so := LinKernel$+ Files LinHostFiles Meta Console LinConsole BugsInterpreter<br><br>Math Strings Dialog Stores<br><br>BugsMappers BugsStrings BugsFiles BugsStdInterpreter<br>BugsMsg BugsRegistry<br><br>MathSort MathMatrix MathSparsematrix MathFunc MathRandnum MathODE MathFunctional MathRungeKutta MathRungeKutta45 MathBulirschStoer MathAESolver MathIntegrate<br></font><font face="Arial" color="#000100" size="3">MathLincon</font><font face="Arial" color="#000100" size="2"> </font><font face="Arial" color="#000000" size="3">MathTT800 </font><font face="Arial" color="#FF0000" size="3">MathTaucsImp </font><font face="Arial" color="#000000" size="3">MathDiagmatrix MathBGR MathSmooth<br><br>GraphRules GraphNodes GraphLogical GraphStochastic GraphScalar GraphVector GraphUnivariate GraphMultivariate GraphConjugateMV GraphChain GraphBlock<br><br>MonitorsSamples MonitorsSummary MonitorsDeviance<br><br>UpdaterUpdaters UpdaterResample UpdaterMethods UpdaterUnivariate UpdaterMultivariate UpdaterContinuous UpdaterActions UpdaterMetmonitor <br></font><font face="Arial" color="#FF0000" size="3"><br></font><font face="Arial" color="#000000" size="3">GraphConstant GraphMixture GraphStack GraphFlat GraphGeneric GraphClock<br><br>LindevCPM LindevCPT LindevCPB LindevCPS LindevCPP LindevCPE LindevCPH LindevCPL486 LindevCPC486 LindevCPV486<br><br>BugsVersion BugsGrammar BugsNames BugsIndex BugsVariables BugsParser BugsEvaluate BugsNodes BugsOptimize BugsChaingraph BugsCodegen BugsCPCompiler BugsData BugsDeviance BugsRobjects BugsInterface BugsInfo<br><br>Services<br><br>BugsScripting<br><br>BugsEmbed<br><br>BugsRectData BugsSplusData</font><font face="Arial" color="#FF0000" size="3"><br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">SamplesMonitors SamplesIndex SamplesInterface SamplesFormatted SamplesEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">SummaryMonitors SummaryIndex SummaryInterface SummaryFormatted SummaryEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">RanksMonitors RanksIndex RanksInterface RanksFormatted RanksEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">DevianceMonitors DevianceIndex DeviancePlugin DevianceInterface DevianceFormatted DevianceEmbed</font><font face="Arial" color="#0000FF" size="3"><br><br></font><font face="Arial" color="#000000" size="3">CorrelInterface</font><font face="Arial" color="#FF0000" size="3"> </font><font face="Arial" color="#000000" size="3">CorrelFormatted CorrelEmbed<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">GraphCloglog GraphCut GraphDensity GraphEigenvals GraphGammap GraphInprod GraphInverse GraphKepler GraphLog GraphLogdet GraphLogit GraphProbit GraphProduct GraphRanks GraphSumation GraphTable GraphFunctional GraphODEmath GraphODElang<br>GraphPValue GraphReplicate GraphItermap<br><br>GraphBern GraphBinomial GraphCat GraphFounder GraphGeometric GraphHypergeometric GraphMendelian GraphNegbin GraphPoisson GraphRecessive<br><br>GraphMultinom <br><br>GraphBeta GraphChisqr GraphDbexp GraphExp GraphF GraphGEV GraphGPD GraphGamma GraphGengamma GraphLogistic GraphLognorm GraphNormal GraphPareto GraphPolygene GraphStable GraphT GraphTrapezium GraphUniform GraphWeibull GraphWeibullShifted <br><br>GraphDirichlet GraphMVNormal GraphMVT GraphRENormal GraphStochtrend <br>GraphWishart<br><br>GraphScalarT GraphVectorT GraphUnivariateT GraphScalartemp1 GraphVectortemp1<br>GraphUnivariatetemp1<br><br>UpdaterHybrid1D UpdaterAM UpdaterDE UpdaterHybrid<br><br>UpdaterForward <br><br>UpdaterBeta UpdaterCatagorical UpdaterDFreeARS UpdaterDescreteSlice UpdaterEmpty<br>UpdaterGriddy UpdaterGamma UpdaterMetover UpdaterDFreeHybrid1D UpdaterMetbinomial UpdaterMetnormal UpdaterNormal UpdaterPareto UpdaterPoisson UpdaterRejection UpdaterSCAM UpdaterSCDE UpdaterSlice UpdaterNaivemet<br><br>UpdaterAMblock UpdaterAMNLLS UpdaterChain UpdaterDEBlock UpdaterDirichlet <br>UpdaterDirichletprior UpdaterDFreeHybrid UpdaterGLM UpdaterGMRF UpdaterHybridnormal UpdaterHybridglm UpdaterMultinomial UpdaterMVNormal UpdaterMVNLinear UpdaterWishart<br><br>UpdaterUnivariateT UpdaterMultivariateT<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">SpatialBound SpatialPWDPrior SpatialCARl1 SpatialCARNormal SpatialCARProper SpatialStrucMVN SpatialDiscKrig SpatialExpKrig SpatialMaternKrig SpatialPoissconv UpdaterKrigparam<br></font><font face="Arial" color="#0000FF" size="3"><br></font><font face="Arial" color="#000000" size="3">BugsExternal BugsMessages BugsScripts CorrelMessages DevianceMessages GraphMessages RanksMessages SamplesMessages SpatialExternal SummaryMessages<br>UpdaterMessages UpdaterExternal MapsMessages<br><br>BugsResources CorrelResources DevianceResources GraphResources RanksResources <br>SamplesResources SpatialResources SummaryResources UpdaterResources MapsResources<br><br>Startup BugsCLI <br><br>BugsC# <img src="linking8.bmp" alt="[linking8]"></font><font face="Arial" color="#0000FF" size="3"><br></font></p></body></html>